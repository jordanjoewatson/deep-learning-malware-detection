from os import listdir
from os.path import join
from numpy import array
from PIL import Image

"""
Miscellaneous functions
"""

def read_files(dirs, path):
    """
    read all image files in a directory into an array

    Args:
        dirs (array): array of directories to read files from
        path (string): filepath to use to read dirs from

    Returns:
        array of image vectors
    """
    imgs = []
    for d in dirs:
        sectionFiles = listdir(join(path + d))
        imgs += [ array(Image.open("{}{}/{}".format(path,d,f))) for f in sectionFiles ]
    return imgs

def read_file(file, path):
    """
    read image file in a directory into an array

    Args:
        file (string): filename of file to read in
        path (string): path to read the file from

    Returns:
        image vector
    """
    imgs = []
    sectionFiles = listdir(join(path + file))
    imgs += [ array(Image.open("{}{}/{}".format(path,file,f))) for f in sectionFiles ]
    return imgs

# pass in confusion matrix in the form [ tp, fp, fn, tn ]
def accuracy(ls):
    """
    Confusion matrix of list

    Args:
        ls (list): list of [TP, FP, FN, TN]

    Returns:
        accuracy of confusion matrix
    """
    return (ls[0]+ls[-1])/sum(ls)
